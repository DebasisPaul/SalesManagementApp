@page "/ProductCatalog"
@using Syncfusion.Blazor.Lists
@using System.Globalization
@inject IProductService ProductService

<h3>ProductCatalog</h3>

<div class="row mt-3">
    <div class="col-12">
        <SfListView DataSource="ProductData" CssClass="e-list-template listview-template">
            <ListViewFieldSettings TValue="ProductModel" Id="Id" Text="Name" GroupBy="CategoryName"></ListViewFieldSettings>
        </SfListView>
        <ListViewTemplates TValue = "ProductModel">
            <Template>
                <div class="e-list-wrapper e-list-multi-line">
                    <span class="e-list-content">
                        <img src="@context.ImagePath" class="img-class" />
                    </span>
                    <span class="e-list-content"><h5>@context.Name</h5></span>
                    <span class="e-list-content"><b>@context.Price.ToString("C", CultureInfo.CreateSpecificCulture("da-US"))</b></span>
                    <span class="e-list-content">@context.Description</span>
                </div>
            </Template>
            <GroupTemplate>
                <h4>@context.Text</h4>
            </GroupTemplate>
        </ListViewTemplates>
    </div>
</div>

<style>
    .img-class{
        height:90px;
        width:150px;
    }
</style>

@code {
    private List<ProductModel> ProductData { get; set; }

    protected override async Task OnInitializedAsync()
    {
        ProductData = await ProductService.GetProducts();
    }
}
